{{ partial "header.html" . }}

{{if not .IsHome }}
<h1>{{ .Title | markdownify }}</h1>
{{ end }}

{{ .Content }}

<div class="posts-list">
  {{ $pages := .Pages }}
  {{ if .IsHome }}{{ $pages = .Paginator.Pages }}{{ end }}
  {{ $filteredPages := where $pages "Section" "!=" "" }}
  {{ range $filteredPages.GroupByDate "2006-01-02" }}
  <div class="date-group">
    <h3 class="date-heading">{{ .Key | dateFormat "January 2, 2006" }}</h3>
    {{ range .Pages }}
    <article class="post-preview">
      <header>
        <h2><a href="{{ .RelPermalink }}">{{ .Title | markdownify }}</a></h2>
        <div class="post-meta">
          {{ with .Params.tags }}
          <span class="tags">
            {{ range . }}
            <span class="tag">#{{ . }}</span>
            {{ end }}
          </span>
          {{ end }}
        </div>
      </header>
      <div class="post-summary">
        {{ .Summary }}
        {{ if .Truncated }}
        <a href="{{ .RelPermalink }}" class="read-more">Read more...</a>
        {{ end }}
      </div>
    </article>
    {{ end }}
  </div>
  {{ end }}
</div>

{{ if .IsHome }}
{{ if gt .Paginator.TotalPages 1 }}
<nav class="pagination">
  {{ if .Paginator.HasPrev }}
    <a href="{{ .Paginator.Prev.URL }}" class="pagination-prev">← Previous</a>
  {{ end }}
  
  <span class="pagination-info">
    Page {{ .Paginator.PageNumber }} of {{ .Paginator.TotalPages }}
  </span>
  
  {{ if .Paginator.HasNext }}
    <a href="{{ .Paginator.Next.URL }}" class="pagination-next">Next →</a>
  {{ end }}
</nav>
{{ end }}
{{ end }}

{{ partial "footer.html" . }}